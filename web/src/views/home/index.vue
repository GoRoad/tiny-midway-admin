<!--------------------------------
 - @Author: Ronnie Zhang
 - @LastEditor: Ronnie Zhang
 - @LastEditTime: 2023/12/05 21:28:22
 - @Email: zclzone@outlook.com
 - Copyright Â© 2023 Ronnie Zhang(å¤§è„¸æ€ª) | https://isme.top
 --------------------------------->

<template>
  <AppPage show-footer>
    <div class="flex">
      <n-card class="min-w-200 w-30%">
        <div class="flex items-center">
          <n-avatar round :size="60" :src="userStore.avatar" class="flex-shrink-0" />
          <div class="ml-20 flex-col">
            <span class="text-20 opacity-80">
              Hello, {{ userStore.nickName ?? userStore.username }}
            </span>
            <span class="mt-4 opacity-50">å½“å‰è§’è‰²ï¼š{{ userStore.currentRole?.name }}</span>
          </div>
        </div>

        <p class="mt-28 text-14 opacity-60">
          ä¸€ä¸ªäººå‡ ä¹å¯ä»¥åœ¨ä»»ä½•ä»–æ€€æœ‰æ— é™çƒ­å¿±çš„äº‹æƒ…ä¸ŠæˆåŠŸã€‚
        </p>
        <p class="mt-12 text-right text-12 opacity-40">
          â€”â€” æŸ¥å°”æ–¯Â·å²è€ƒä¼¯
        </p>
      </n-card>
      <n-card class="ml-12 w-70%" title="âœ¨ æ¬¢è¿ä½¿ç”¨ Tiny-Midway-Admin">
        <template #header-extra>
          <a
            class="text-14 text-primary text-highlight hover:underline hover:opacity-80"
            href="#"
            target="_blank"
            @click.prevent="message?.info('æ¥éƒ½æ¥äº†å¸®å¿™ç‚¹ä¸ªStarå‘—...')"
          >
          {{ version }}
          </a>
        </template>

        <p class="opacity-60">åŸºäºå¦‚ä¸‹é¡¹ç›®ä¿®æ”¹å¼€å‘</p>
        <p class="opacity-60">
          âš¡ æ„Ÿè°¢ <a class="text-orange" href="https://github.com/zclzone/vue-naive-admin/tree/2.x" target="_blank">vue-naive-admin</a> çš„å¼€æº
        </p>
        <p class="opacity-60">
          âš¡ æ„Ÿè°¢ <a class="text-orange" href="https://github.com/midwayjs/midway" target="_blank">midway-js</a> çš„å¼€æº
        </p>
        <footer class="mt-12 flex items-center justify-end">
          <n-button
            type="primary"
            ghost
            tag="a"
            href="https://github.com/34892002/tiny-midway-admin/blob/main/README.md"
            target="__blank"
          >
            Readme
          </n-button>
          <n-button
            type="primary"
            class="ml-12"
            tag="a"
            href="https://github.com/34892002/tiny-midway-admin"
            target="__blank"
          >
            ä»£ç ä»“åº“
          </n-button>
        </footer>
      </n-card>
    </div>
    <div class="mt-12 flex">
      <n-card class="w-50%" title="ğŸ’¯ ç‰¹æ€§" segmented>
        <template #header-extra>
          <span class="opacity-90 text-highlight">ğŸ‘ å†ç»åå‡ æ¬¡é‡æ„å’Œç»†èŠ‚æ‰“ç£¨</span>
        </template>

        <ul class="opacity-90">
          <li class="py-4">
            ğŸš€ åç«¯
            <b>MidwayJs</b>
            æŠ€æœ¯æ ˆ:
            <span class="text-highlight">Prisma + Casbin + TypeScript</span>
          </li>
          <li class="py-4">
            ğŸ” åŸºäº Casbinï¼Œ
            <span class="text-highlight">èœå•ã€æ¥å£ã€æŒ‰é’®</span>
            ï¼Œå…¨éƒ¨å¯æ§ï¼ŒRBACæ¨¡å‹æƒé™ç®¡ç†
          </li>
          <li class="py-4">
            ğŸ‘ ä½¿ç”¨ Prismaï¼Œ
            <span class="text-highlight">æ¡†æ¶æ”¯æŒ</span>
            PostgreSQLã€MySQLã€SQLiteã€MongoDBã€SQLServerã€CockroachDB
          </li>
          <li class="py-4">
            âš¡ï¸ å°è£… Crud
            ï¼Œäº”åˆ†é’Ÿ
            <span class="text-highlight">å¢</span>ã€
            <span class="text-highlight">åˆ </span>ã€
            <span class="text-highlight">æ”¹</span>ã€
            <span class="text-highlight">æŸ¥</span>ã€
            æ¥å£å…¨æå®š
          </li>
          <li class="py-4">
            âœ¨ æ”¯æŒ Refresh Tokenï¼Œ
            <span class="text-highlight">æ— æ„Ÿåˆ·æ–°</span>
            ï¼Œç”¨æˆ·ç™»å½•æ€å¯æ§ï¼Œå®‰å…¨ä¸ä½“éªŒç¼ºä¸€ä¸å¯
          </li>
          <br>
          <li class="py-4">
            ğŸ†’ å‰ç«¯
            <b>Vue3</b>
            æŠ€æœ¯æ ˆ:
            <span class="text-highlight">Vite + Pinia + Naive UI</span>
          </li>
          <li class="py-4">
            ğŸ‡ ä½¿ç”¨
            <b>iconify + unocss</b>
            æ¡†æ¶:
            <span class="text-highlight">Unocss</span>
            ï¼Œä¼˜é›…ã€è½»é‡ã€æ˜“ç”¨ï¼Œå›¾æ ‡æ”¯æŒè‡ªå®šä¹‰ï¼Œæ”¯æŒåŠ¨æ€æ¸²æŸ“
          </li>
          <li class="py-4">
            âš¡ï¸ åŸºäº Fast-Crud
            ï¼Œé›†æˆ
            <span class="text-highlight">CRUD</span>
            è¡¨æ ¼ã€åˆ†é¡µæŸ¥è¯¢æ ‡å‡†ç»„ä»¶ï¼ŒåŒ…å«
            <span class="text-highlight">å¯Œæ–‡æœ¬</span>ã€
            <span class="text-highlight">JSON</span>ã€
            <span class="text-highlight">ä¸Šä¼ </span>
            ç­‰ä¸šåŠ¡ç»„ä»¶ï¼Œæ”¯æŒCOSã€OSSã€æœ¬åœ°ä¸Šä¼ æ¨¡å¼ï¼ŒåŠ©åŠ›å¿«é€Ÿå¼€å‘
          </li>
          <li class="py-4">
            ğŸ¨ <span class="text-highlight">æ‰å¹³åŒ–è·¯ç”±</span> è®¾è®¡ï¼Œæ¯ä¸€ä¸ªç»„ä»¶éƒ½å¯ä»¥æ˜¯ä¸€ä¸ªé¡µé¢ï¼Œå‘Šåˆ«å¤šçº§è·¯ç”± KeepAlive éš¾å®ç°é—®é¢˜
          </li>
        </ul>

        <!-- <n-divider class="mb-0! mt-12!">
          <p class="text-14 opacity-60">
            ğŸ‘‰ç‚¹å‡»
            <b class="mx-2 transition hover:text-primary">
              <a href="https://isme.top" target="_blank">æ›´å¤š</a>
            </b>
            æŸ¥çœ‹æ›´å¤šå®ç”¨åŠŸèƒ½ï¼ŒæŒç»­å¼€å‘ä¸­...
          </p>
        </n-divider> -->
      </n-card>

      <n-card class="ml-12 w-50%" title="ğŸ› ï¸ æŠ€æœ¯æ ˆ" segmented>
        <VChart :option="skillOption" autoresize />
      </n-card>
    </div>

    <n-card class="mt-12" title="âš¡ï¸ è¶‹åŠ¿" segmented>
      <div class="h-400">
        <VChart :option="trendOption" autoresize />
      </div>
    </n-card>
  </AppPage>
</template>

<script setup>
import { useUserStore } from '@/store'
import { BarChart, LineChart, PieChart } from 'echarts/charts'
import { GridComponent, LegendComponent, TooltipComponent } from 'echarts/components'
import * as echarts from 'echarts/core'
import { UniversalTransition } from 'echarts/features'
import { CanvasRenderer } from 'echarts/renderers'
import VChart from 'vue-echarts'

const version = import.meta.env.VITE_VERSION
const userStore = useUserStore()

echarts.use([
  TooltipComponent,
  GridComponent,
  LegendComponent,
  BarChart,
  LineChart,
  CanvasRenderer,
  UniversalTransition,
  PieChart,
])

const trendOption = {
  tooltip: {
    trigger: 'axis',
    axisPointer: {
      type: 'cross',
      crossStyle: {
        color: '#999',
      },
    },
  },
  legend: {
    top: '5%',
    data: ['star', 'fork'],
  },
  xAxis: [
    {
      type: 'category',
      data: ['1æœˆ', '2æœˆ', '3æœˆ', '4æœˆ', '5æœˆ', '6æœˆ', '7æœˆ', '8æœˆ', '9æœˆ', '10æœˆ', '11æœˆ', '12æœˆ'],
      axisPointer: {
        type: 'shadow',
      },
    },
  ],
  yAxis: [
    {
      type: 'value',
      min: 0,
      max: 3000,
      interval: 500,
      axisLabel: {
        formatter: '{value}',
      },
    },
    {
      type: 'value',
      min: 0,
      max: 500,
      interval: 100,
      axisLabel: {
        formatter: '{value}',
      },
    },
  ],
  series: [
    {
      name: 'star',
      type: 'line',
      data: [200, 320, 520, 550, 600, 805, 888, 950, 1300, 2503, 2702, 2712],
    },
    {
      name: 'fork',
      yAxisIndex: 1,
      type: 'bar',
      data: [40, 72, 110, 115, 121, 175, 180, 201, 260, 398, 423, 455],
    },
  ],
}

const skillOption = {
  tooltip: {
    trigger: 'item',
    formatter({ name, value }) {
      return `${name} ${value}%`
    },
  },
  legend: {
    left: 'center',
  },
  series: [
    {
      top: '12%',
      type: 'pie',
      radius: ['35%', '90%'],
      avoidLabelOverlap: true,
      itemStyle: {
        borderRadius: 10,
        borderColor: '#fff',
        borderWidth: 2,
      },
      label: {
        show: false,
        position: 'center',
      },
      emphasis: {
        label: {
          show: true,
          fontSize: 36,
          fontWeight: 'bold',
        },
      },
      labelLine: {
        show: false,
      },
      data: [
        { value: 38.5, name: 'Vue' },
        { value: 37.0, name: 'JavaScript' },
        { value: 6.5, name: 'CSS' },
        { value: 6.2, name: 'HTML' },
        { value: 1.8, name: 'Other' },
      ],
    },
  ],
}

const message = $message
</script>
